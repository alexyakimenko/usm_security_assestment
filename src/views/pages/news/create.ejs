<%- include('../../components/head', { page: { title: 'Создание новости' } }) %>
<%- include('../../components/navbar') %>
<main class="bg-slate-50">
  <section class="container mx-auto max-w-5xl px-4 py-12 space-y-8">
    <div>
      <p class="text-sm text-slate-500">Добавьте новый материал в ленту</p>
      <h1 class="text-3xl font-bold text-slate-900">Создание новости</h1>
    </div>

    <% if (errors.general.length) { %>
      <% errors.general.forEach(function(msg) { %>
        <div class="rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-red-900">
          <%= msg %>
        </div>
      <% }) %>
    <% } %>

    <div class="rounded-2xl border border-slate-200 bg-white p-8 shadow-sm">
      <form action="/news" method="post" class="space-y-5">
        <div class="space-y-1">
          <label for="title" class="block text-sm font-semibold text-slate-800">Заголовок</label>
          <input
            type="text"
            id="title"
            name="title"
            value="<%= values.title %>"
            class="w-full rounded-lg border border-slate-200 px-3 py-2 shadow-inner focus:border-slate-900 focus:outline-none"
            maxlength="100"
            required
          />
          <% errors.title.forEach(function(msg) { %>
            <p class="text-xs text-red-700"><%= msg %></p>
          <% }) %>
        </div>

        <div class="space-y-1">
          <label for="category_id" class="block text-sm font-semibold text-slate-800">Категория</label>
          <select
            id="category_id"
            name="category_id"
            class="w-full rounded-lg border border-slate-200 px-3 py-2 focus:border-slate-900 focus:outline-none"
            required
          >
            <option value="" disabled <%= !values.category_id ? 'selected' : '' %>>Выберите категорию</option>
            <% categories.forEach(function(category) { %>
              <option value="<%= category.id %>" <%= String(values.category_id) === String(category.id) ? 'selected' : '' %>>
                <%= category.name %>
              </option>
            <% }) %>
          </select>
          <% errors.category_id.forEach(function(msg) { %>
            <p class="text-xs text-red-700"><%= msg %></p>
          <% }) %>
        </div>

        <div class="space-y-1">
          <label for="content" class="block text-sm font-semibold text-slate-800">Текст статьи</label>
          <textarea
            id="content"
            name="content"
            rows="8"
            class="w-full rounded-lg border border-slate-200 px-3 py-2 shadow-inner focus:border-slate-900 focus:outline-none"
            required
          ><%= values.content %></textarea>
          <% errors.content.forEach(function(msg) { %>
            <p class="text-xs text-red-700"><%= msg %></p>
          <% }) %>
        </div>

        <div class="flex items-center gap-3">
          <button
            type="submit"
            class="inline-flex items-center justify-center rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:-translate-y-0.5 hover:bg-slate-800 cursor-pointer"
          >
            Сохранить
          </button>
          <a href="/news" class="text-sm font-semibold text-slate-700 hover:underline">Отмена</a>
        </div>
      </form>
    </div>
  </section>
</main>
<%- include('../../components/footer') %>

<%- include('../../components/head', { page: { title: 'Редактирование категории' } }) %>
<%- include('../../components/navbar') %>
<main class="bg-slate-50">
  <section class="container mx-auto max-w-4xl px-4 py-12 space-y-8">
    <div class="flex items-start justify-between gap-4">
      <div>
        <p class="text-sm text-slate-500">Обновите описание и название категории</p>
        <h1 class="text-3xl font-bold text-slate-900">Редактирование категории</h1>
      </div>
      <form action="/categories/<%= categoryId %>/delete" method="post" onsubmit="return confirm('Удалить категорию?');">
        <button type="submit" class="text-sm font-semibold text-red-700 hover:underline cursor-pointer">Удалить</button>
      </form>
    </div>

    <% if (errors.general.length) { %>
      <% errors.general.forEach(function(msg) { %>
        <div class="rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-red-900">
          <%= msg %>
        </div>
      <% }) %>
    <% } %>

    <div class="rounded-2xl border border-slate-200 bg-white p-8 shadow-sm">
      <form action="/categories/<%= categoryId %>" method="post" class="space-y-5">
        <div class="space-y-1">
          <label for="name" class="block text-sm font-semibold text-slate-800">Название</label>
          <input
            type="text"
            id="name"
            name="name"
            value="<%= category.name %>"
            class="w-full rounded-lg border border-slate-200 px-3 py-2 shadow-inner focus:border-slate-900 focus:outline-none"
            maxlength="30"
            required
          />
          <% errors.name.forEach(function(msg) { %>
            <p class="text-xs text-red-700"><%= msg %></p>
          <% }) %>
        </div>

        <div class="space-y-1">
          <label for="description" class="block text-sm font-semibold text-slate-800">Описание</label>
          <textarea
            id="description"
            name="description"
            rows="5"
            class="w-full rounded-lg border border-slate-200 px-3 py-2 shadow-inner focus:border-slate-900 focus:outline-none"
            required
          ><%= category.description %></textarea>
          <% errors.description.forEach(function(msg) { %>
            <p class="text-xs text-red-700"><%= msg %></p>
          <% }) %>
        </div>

        <div class="flex items-center gap-3">
          <button
            type="submit"
            class="inline-flex items-center justify-center rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:-translate-y-0.5 hover:bg-slate-800 cursor-pointer"
          >
            Обновить
          </button>
          <a href="/categories" class="text-sm font-semibold text-slate-700 hover:underline">Назад к списку</a>
        </div>
      </form>
    </div>
  </section>
</main>
<%- include('../../components/footer') %>
